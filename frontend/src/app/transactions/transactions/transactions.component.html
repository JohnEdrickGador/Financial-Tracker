<h1>Transactions Page</h1>

<div class="transactions-bar">
    <div class="card flex justify-center">
        <p-button [label]="showFilters ? 'Close Filters' : 'Open Filters' "
            [icon]="showFilters? 'pi pi-times' : 'pi pi-filter'" (onClick)="toggleFilters()"
            [severity]="showFilters ? 'secondary' : 'primary' " />
    </div>

    <div class="card flex justify-center">
        <p-button label="Add Record" severity="info" icon="pi pi-plus" (onClick)="openTransactionsModal()" />
    </div>

    <div class=" card flex justify-center">
        <p-button label="Add Bank" severity="info" icon="pi pi-plus" />
    </div>
</div>

<transactions-form-modal [(visible)]="showTransactionsModal"></transactions-form-modal>

<div class="filter-options" *ngIf="showFilters === true">
    <div class="card flex justify-center">
        <p-select [options]="months" [showClear]="true" [(ngModel)]="selectedMonth" placeholder="Select Month"
            class="w-full md:w-56" />
    </div>

    <div class="card flex justify-center">
        <p-select [options]="years" [showClear]="true" [(ngModel)]="selectedYear" placeholder="Select Year"
            class="w-full md:w-56" />
    </div>

    <div class="card flex justify-center">
        <p-button label="Apply Filters" icon="pi pi-check" severity="primary" />
    </div>
</div>

<!-- <div class=" card transactions-table">
    <p-table [columns]="cols" [value]="transactions" [tableStyle]="{ 'min-width': '50rem' }" dataKey="id">
        <ng-template #footer>
            <tr>
                <td colspan="7">There are {{transactions.length}} transactions.</td>
            </tr>
        </ng-template>
        <ng-template #header let-columns>
            <tr>
                <th *ngFor="let col of columns">
                    {{col.header}}
                </th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr>
                <td *ngFor="let col of columns">
                    {{rowData[col.field]}}
                </td>
                <td>
                    <div style="display: flex; gap: 1rem;">
                        <p-button icon="pi pi-pencil" severity="success"></p-button>
                        <p-button icon="pi pi-trash" severity="danger"
                            (onClick)="deleteTransaction(rowData)"></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div> -->

<div class="card transactions-table">
    <table style="min-width: 50rem; width: 100%; border-collapse: collapse;">
        <!-- HEADER -->
        <thead>
            <tr>
                <th *ngFor="let col of cols" style="border: 1px solid #ccc; padding: 0.5rem;">
                    {{ col.header }}
                </th>
                <th style="border: 1px solid #ccc; padding: 0.5rem;">Actions</th>
            </tr>
        </thead>

        <!-- BODY -->
        <tbody>
            <tr *ngFor="let row of transactions">
                <td *ngFor="let col of cols" style="border: 1px solid #ccc; padding: 0.5rem;">
                    {{ row[col.field] }}
                </td>
                <td style="border: 1px solid #ccc; padding: 0.5rem;">
                    <div style="display: flex; gap: 1rem;">
                        <button>Edit</button>
                        <button (click)="deleteTransaction(row)">Delete</button>
                    </div>
                </td>
            </tr>
        </tbody>

        <!-- FOOTER -->
        <tfoot>
            <tr>
                <td [attr.colspan]="cols.length + 1" style="border: 1px solid #ccc; padding: 0.5rem;">
                    There are {{ transactions.length }} transactions.
                </td>
            </tr>
        </tfoot>
    </table>
</div>